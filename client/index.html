<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tracking - HithoBus</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="app-container">

    <!-- HEADER -->
    <header class="header-blue">
      <div class="trip-title">Current Trip</div>
      <div class="trip-route">
        Haldwani <i class="ri-arrow-right-line"></i> Anand Vihar
      </div>

      <div class="progress-section">
        <div class="progress-labels">
          <span id="label-stop">Stop -- of --</span>
          <span id="label-total-dist">--km</span>
        </div>
        <div class="progress-bar-bg">
          <div class="progress-bar-fill" id="trip-progress-bar"></div>
        </div>
      </div>
    </header>

    <!-- [A] STOPS AVAILABLE CARD -->
    <div id="card-stops-available" class="card hidden">
      <div class="stop-card-content">
        <div class="pin-icon-box">
          <i class="ri-map-pin-user-fill"></i>
        </div>
        <div class="stop-details">
          <div class="stop-label">Current Destination Stop</div>
          <div class="stop-name" id="stop-name">--</div>
        </div>
      </div>

      <div style="border-top:1px solid #f3f4f6; margin: 12px 0;"></div>

      <div class="stat-grid">
        <div>
          <div class="stop-label">Distance</div>
          <div class="stat-value" style="font-size:14px" id="stop-dist">--</div>
        </div>
        <div class="text-right">
          <div class="stop-label">Stop Number</div>
          <div class="stop-name" style="font-size:14px" id="stop-num">--</div>
          <div class="at-stop-badge hidden" id="at-stop-badge">● AT STOP</div>
        </div>
      </div>

      <!-- Connection Warning Injection Point -->
      <div id="conn-warning-1" class="hidden"></div>
    </div>

    <!-- [B] NO STOPS CARD (Red Alert) -->
    <div id="card-stops-unavailable" class="card alert-card-red hidden">
      <div class="alert-header">
        <i class="ri-forbid-2-line alert-icon-red"></i>
        <div class="alert-title">Stop Information</div>
      </div>
      <div class="alert-title" style="margin-bottom:4px">No Stops Available</div>
      <div class="alert-desc">
        We couldn't find any stop information for this bus at the moment for this route.
      </div>
      <div class="badge-unavailable">● UNAVAILABLE</div>
    </div>

    <!-- [C] TRIP PROGRESS CARD -->
    <div class="card">
      <div class="trip-header">
        <div class="route-icon-box"><i class="ri-route-line"></i></div>
        <div class="current-loc">
          <h4>Trip Progress</h4>
          <span id="near-location">Near --</span>
        </div>
      </div>

      <!-- Warning Injection Point -->
      <div id="conn-warning-2" class="hidden" style="margin-bottom:12px;"></div>

      <div class="stat-grid">
        <!-- Row 1 -->
        <div class="stat-row">
          <div class="stat-label-icon"><i class="ri-time-line"></i> Time Remaining</div>
          <div class="stat-value" id="time-remaining">--</div>
        </div>
        <div class="stat-row text-right">
          <div class="stat-label-icon" style="justify-content:flex-end"><i class="ri-ruler-line"></i> Distance Left
          </div>
          <div class="stat-value dark" id="distance-left">--</div>
        </div>

        <!-- Row 2 -->
        <div class="stat-row">
          <div class="stat-label-icon"><i class="ri-speed-mini-line"></i> Current Speed</div>
          <div class="stat-value dark"><span id="speed">0</span> km/h</div>
        </div>
        <div class="stat-row text-right">
          <div class="stat-label-icon" style="justify-content:flex-end"><i class="ri-focus-3-line"></i> Coordinates
          </div>
          <div class="stat-value dark" style="font-size:12px" id="coords">--</div>
        </div>
      </div>

      <div class="bottom-status-row">
        <div class="live-indicator"><span style="color:#10b981; font-size:8px;">●</span> LIVE</div>
      </div>
    </div>

    <!-- [D] FOOTER STATUS -->
    <div class="card mode-card">
      <div class="mode-info">
        <i class="ri-radar-line mode-icon"></i>
        <div class="mode-text">
          <h5>Tracking Mode</h5>
          <p>Crowdsourced in Real-Time (Internet)</p>
        </div>
      </div>
      <div class="active-dot">● ACTIVE</div>
    </div>

    <br><br><br> <!-- Spacing -->
  </div>

  <!-- Simulator Toggle (Floating) -->
  <div style="position:fixed; top:10px; right:10px; z-index:999">
    <button onclick="toggleSimulator()"
      style="background:white; border:1px solid #ddd; padding:8px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1)">
      <i class="ri-steering-2-line"></i>
    </button>
  </div>

  <!-- Hidden Simulator Panel (Overlays bottom) -->
  <div id="simulator-panel" class="sim-overlay hidden">
    <h3>Driver Control</h3>
    <input type="text" id="simBusId" value="UK-07-PA-1234"
      style="width:100%; padding:8px; margin:8px 0; border:1px solid #ddd;">
    <select id="simMode" style="width:100%; padding:8px; margin-bottom:8px;">
      <option value="GPS">GPS Mode</option>
      <option value="CELL">Cell Tower</option>
    </select>
    <div style="display:flex; gap:10px">
      <button onclick="startSimulator()"
        style="flex:1; padding:10px; background:#2563eb; color:white; border:none; border-radius:8px;">Start</button>
      <button onclick="stopSimulator()"
        style="flex:1; padding:10px; background:#ef4444; color:white; border:none; border-radius:8px;">Stop</button>
    </div>
    <div id="sim-log" style="font-size:10px; color:#666; margin-top:8px;">Ready</div>
  </div>

  <script src="app.js"></script>
</body>

</html>